---
id: categories
title: Categories API
sidebar_label: Categories
description: Complete guide to Pika's categories API for managing transaction categories and organization
---

# 🏷️ Categories API

The Categories API allows you to manage transaction categories for organizing and classifying financial transactions. Categories can be hierarchical (parent-child relationships) and support custom icons, colors, and descriptions.

## 📡 Base URL

All categories endpoints are prefixed with:
```
/wp-json/pika/v1/categories
```

## 🚀 Endpoints

### Get All Categories

Retrieve all categories for the authenticated user.

**Endpoint:** `GET /wp-json/pika/v1/categories`

**Headers:**
- `Cookie`: Authentication cookie

**Query Parameters:**
- `type` (optional): Filter by category type (`income`, `expense`, `transfer`)
- `parent_id` (optional): Filter by parent category ID
- `include_system` (optional): Include system categories (default: true)

**Response:**
```json
{
  "success": true,
  "data": {
    "categories": [
      {
        "id": 1,
        "name": "Food & Dining",
        "icon": "utensils",
        "color": "#ff6b6b",
        "bgColor": "#fff5f5",
        "type": "expense",
        "description": "Restaurants, groceries, and food delivery",
        "parentId": null,
        "isSystem": false,
        "transactionCount": 45,
        "totalAmount": 1250.75,
        "createdAt": "2024-01-01T10:00:00Z",
        "updatedAt": "2024-01-15T14:30:00Z"
      },
      {
        "id": 2,
        "name": "Transportation",
        "icon": "car",
        "color": "#4ecdc4",
        "bgColor": "#f0fdfa",
        "type": "expense",
        "description": "Fuel, public transport, and vehicle maintenance",
        "parentId": null,
        "isSystem": false,
        "transactionCount": 23,
        "totalAmount": 450.25,
        "createdAt": "2024-01-01T10:00:00Z",
        "updatedAt": "2024-01-10T09:15:00Z"
      },
      {
        "id": 3,
        "name": "Salary",
        "icon": "briefcase",
        "color": "#45b7d1",
        "bgColor": "#f0f9ff",
        "type": "income",
        "description": "Regular employment income",
        "parentId": null,
        "isSystem": true,
        "transactionCount": 12,
        "totalAmount": 15000.00,
        "createdAt": "2024-01-01T10:00:00Z",
        "updatedAt": "2024-01-01T10:00:00Z"
      }
    ],
    "pagination": {
      "total": 15,
      "per_page": 20,
      "current_page": 1,
      "last_page": 1
    }
  }
}
```

**Example Request:**
```bash
curl -X GET "http://localhost:8000/wp-json/pika/v1/categories?type=expense" \
  -H "Cookie: pika_token=base64_encoded_token"
```

### Get Category by ID

Retrieve a specific category by its ID.

**Endpoint:** `GET /wp-json/pika/v1/categories/{id}`

**Headers:**
- `Cookie`: Authentication cookie

**Response:**
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "Food & Dining",
    "icon": "utensils",
    "color": "#ff6b6b",
    "bgColor": "#fff5f5",
    "type": "expense",
    "description": "Restaurants, groceries, and food delivery",
    "parentId": null,
    "isSystem": false,
    "transactionCount": 45,
    "totalAmount": 1250.75,
    "children": [
      {
        "id": 4,
        "name": "Restaurants",
        "icon": "utensils",
        "color": "#ff8787",
        "bgColor": "#fff0f0",
        "type": "expense",
        "parentId": 1,
        "transactionCount": 28,
        "totalAmount": 850.50
      }
    ],
    "createdAt": "2024-01-01T10:00:00Z",
    "updatedAt": "2024-01-15T14:30:00Z"
  }
}
```

**Example Request:**
```bash
curl -X GET http://localhost:8000/wp-json/pika/v1/categories/1 \
  -H "Cookie: pika_token=base64_encoded_token"
```

### Create Category

Create a new category.

**Endpoint:** `POST /wp-json/pika/v1/categories`

**Headers:**
- `Cookie`: Authentication cookie
- `Content-Type: application/json`

**Request Body:**
```json
{
  "name": "Entertainment",
  "icon": "film",
  "color": "#a855f7",
  "bgColor": "#faf5ff",
  "type": "expense",
  "description": "Movies, games, and entertainment activities",
  "parentId": null
}
```

**Required Fields:**
- `name` (string): Category name
- `type` (string): Category type (`income`, `expense`, `transfer`)

**Optional Fields:**
- `icon` (string): Icon identifier
- `color` (string): Text color (hex format)
- `bgColor` (string): Background color (hex format)
- `description` (string): Category description
- `parentId` (integer): Parent category ID for subcategories

**Response:**
```json
{
  "success": true,
  "message": "Category created successfully",
  "data": {
    "id": 16,
    "name": "Entertainment",
    "icon": "film",
    "color": "#a855f7",
    "bgColor": "#faf5ff",
    "type": "expense",
    "description": "Movies, games, and entertainment activities",
    "parentId": null,
    "isSystem": false,
    "transactionCount": 0,
    "totalAmount": 0.00,
    "createdAt": "2024-01-20T15:30:00Z",
    "updatedAt": "2024-01-20T15:30:00Z"
  }
}
```

**Example Request:**
```bash
curl -X POST http://localhost:8000/wp-json/pika/v1/categories \
  -H "Cookie: pika_token=base64_encoded_token" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Entertainment",
    "icon": "film",
    "color": "#a855f7",
    "bgColor": "#faf5ff",
    "type": "expense",
    "description": "Movies, games, and entertainment activities"
  }'
```

### Update Category

Update an existing category.

**Endpoint:** `PUT /wp-json/pika/v1/categories/{id}`

**Headers:**
- `Cookie`: Authentication cookie
- `Content-Type: application/json`

**Request Body:**
```json
{
  "name": "Entertainment & Leisure",
  "description": "Updated description for entertainment category",
  "color": "#9333ea"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Category updated successfully",
  "data": {
    "id": 16,
    "name": "Entertainment & Leisure",
    "icon": "film",
    "color": "#9333ea",
    "bgColor": "#faf5ff",
    "type": "expense",
    "description": "Updated description for entertainment category",
    "parentId": null,
    "isSystem": false,
    "transactionCount": 0,
    "totalAmount": 0.00,
    "createdAt": "2024-01-20T15:30:00Z",
    "updatedAt": "2024-01-20T16:45:00Z"
  }
}
```

**Example Request:**
```bash
curl -X PUT http://localhost:8000/wp-json/pika/v1/categories/16 \
  -H "Cookie: pika_token=base64_encoded_token" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Entertainment & Leisure",
    "description": "Updated description for entertainment category"
  }'
```

### Delete Category

Delete a category. System categories cannot be deleted.

**Endpoint:** `DELETE /wp-json/pika/v1/categories/{id}`

**Headers:**
- `Cookie`: Authentication cookie

**Response:**
```json
{
  "success": true,
  "message": "Category deleted successfully"
}
```

**Example Request:**
```bash
curl -X DELETE http://localhost:8000/wp-json/pika/v1/categories/16 \
  -H "Cookie: pika_token=base64_encoded_token"
```

## 🎨 Category Properties

### Icon Options

**Available Icons:**
- `utensils` - Food & Dining
- `car` - Transportation
- `home` - Housing
- `briefcase` - Work & Income
- `shopping-bag` - Shopping
- `heart` - Health & Fitness
- `graduation-cap` - Education
- `gift` - Gifts & Donations
- `plane` - Travel
- `gamepad` - Entertainment
- `medical-cross` - Healthcare
- `credit-card` - Banking & Finance

### Color Format

- **Text Color**: Hex color code (e.g., `#ff6b6b`)
- **Background Color**: Hex color code (e.g., `#fff5f5`)
- **Recommended**: Use contrasting colors for readability

### Category Types

- **`income`**: Money coming in (salary, investments, gifts)
- **`expense`**: Money going out (food, transportation, bills)
- **`transfer`**: Moving money between accounts

## 🔄 Hierarchical Categories

### Parent-Child Relationships

```json
{
  "id": 1,
  "name": "Food & Dining",
  "type": "expense",
  "children": [
    {
      "id": 4,
      "name": "Restaurants",
      "parentId": 1
    },
    {
      "id": 5,
      "name": "Groceries",
      "parentId": 1
    },
    {
      "id": 6,
      "name": "Fast Food",
      "parentId": 1
    }
  ]
}
```

### Creating Subcategories

```bash
curl -X POST http://localhost:8000/wp-json/pika/v1/categories \
  -H "Cookie: pika_token=base64_encoded_token" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Italian Restaurants",
    "icon": "utensils",
    "type": "expense",
    "parentId": 4
  }'
```

## 🚨 Error Responses

### Category Not Found
```json
{
  "success": false,
  "error": "Category not found",
  "code": "category_not_found",
  "details": {
    "id": 999
  }
}
```

### Invalid Category Type
```json
{
  "success": false,
  "error": "Invalid category type",
  "code": "invalid_category_type",
  "details": {
    "field": "type",
    "value": "invalid",
    "allowed_values": ["income", "expense", "transfer"]
  }
}
```

### Cannot Delete System Category
```json
{
  "success": false,
  "error": "Cannot delete system category",
  "code": "system_category_protected",
  "details": {
    "id": 3,
    "name": "Salary"
  }
}
```

### Category Has Transactions
```json
{
  "success": false,
  "error": "Cannot delete category with existing transactions",
  "code": "category_has_transactions",
  "details": {
    "id": 1,
    "transaction_count": 45
  }
}
```

### Validation Error
```json
{
  "success": false,
  "error": "Validation failed",
  "code": "validation_error",
  "details": [
    {
      "field": "name",
      "message": "Category name is required"
    },
    {
      "field": "color",
      "message": "Invalid color format. Use hex color code (e.g., #ff6b6b)"
    }
  ]
}
```

## 📱 Frontend Integration

### React Hook Example

```typescript
import { useCategories } from '../hooks/useCategories';

function CategoriesPage() {
  const { categories, createCategory, updateCategory, deleteCategory, loading } = useCategories();

  const handleCreateCategory = async (categoryData) => {
    try {
      await createCategory(categoryData);
      // Show success message
    } catch (err) {
      // Handle error
    }
  };

  return (
    <div>
      {categories.map(category => (
        <CategoryCard 
          key={category.id} 
          category={category}
          onEdit={updateCategory}
          onDelete={deleteCategory}
        />
      ))}
    </div>
  );
}
```

### Categories Service

```typescript
// services/categories.service.ts
export class CategoriesService {
  async getCategories(params?: CategoryFilters): Promise<Category[]> {
    const response = await api.get('/categories', { params });
    return response.data.data.categories;
  }

  async getCategory(id: number): Promise<Category> {
    const response = await api.get(`/categories/${id}`);
    return response.data.data;
  }

  async createCategory(categoryData: CreateCategoryData): Promise<Category> {
    const response = await api.post('/categories', categoryData);
    return response.data.data;
  }

  async updateCategory(id: number, updates: Partial<Category>): Promise<Category> {
    const response = await api.put(`/categories/${id}`, updates);
    return response.data.data;
  }

  async deleteCategory(id: number): Promise<void> {
    await api.delete(`/categories/${id}`);
  }
}
```

## 💡 Best Practices

1. **Category Naming**
   - Use clear, descriptive names
   - Avoid abbreviations
   - Be consistent with naming conventions

2. **Color Selection**
   - Choose contrasting colors for readability
   - Use consistent color schemes
   - Consider accessibility (color blindness)

3. **Hierarchy Management**
   - Keep category depth reasonable (max 3-4 levels)
   - Use parent categories for broad grouping
   - Avoid overly specific subcategories

4. **System Categories**
   - Don't modify system categories
   - Use them as templates for custom categories
   - Respect their predefined structure

## 📚 Related Documentation

- [Transactions API](./transactions) - Manage transactions with categories
- [Tags API](./tags) - Additional transaction organization
- [Analytics API](./analytics) - Category-based reporting
- [Settings API](./settings) - Default category configuration
