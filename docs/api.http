# Variables (replace with your own values)
@base_url = http://localhost:8000
@username = testuser
@password = EEmc PH8u kgc4 3WY6 vFY9 y8Zp
# @password = Bpab m4US BD1A 5QmT E1NX rFPO
# @password = F623 uYkb EXEI SBXl rNd1 6OMU
@admin_username = admin
@admin_password = ufEK id77 GTpK fGdZ G1Zq 42E8

# @base_url = http://localhost:8881
# @username = testuser
# @password = tljJ S27Y x1lD s65F w49d 7iQR
# @admin_username = admin
# @admin_password = QeX4 LrOs 50wB qjZD 1AyX tEwa

###

# ========================================
# AUTH API ENDPOINTS
# ========================================

# @name login
POST {{base_url}}/wp-json/pika/v1/auth/login
Content-Type: application/json

{
  "user_login": "testuser",
  "password": "LibW OzjP URED zVID ADvr kDB1"
}

###

@authCookie = {{login.response.headers.set-cookie}}

###

# Logout
POST {{base_url}}/wp-json/pika/v1/auth/logout
Cookie: {{authCookie}}

###
# Get me; pika profile
GET {{base_url}}/wp-json/pika/v1/auth/me
Cookie: {{authCookie}}

###

# Get all sessions
GET {{base_url}}/wp-json/pika/v1/auth/sessions
Cookie: {{authCookie}}

###

# Revoke one session
POST {{base_url}}/wp-json/pika/v1/auth/sessions/revoke
Cookie: {{authCookie}}
Content-Type: application/json

{
  "session_id": "<uuid here>"
}

###

# ========================================
# APP API ENDPOINTS
# ========================================

# Get app info
GET {{base_url}}/wp-json/pika/v1/app/info

###

# Get all app lists
GET {{base_url}}/wp-json/pika/v1/app/lists
Cookie: {{authCookie}}

###

# ========================================
# SETTINGS API ENDPOINTS
# ========================================

# Get settings
GET {{base_url}}/wp-json/pika/v1/settings
Cookie: {{authCookie}}

###

# Update settings - valid USD currency
PUT {{base_url}}/wp-json/pika/v1/settings
Cookie: {{authCookie}}
Content-Type: application/json

{
  "currency": "INR"
}

###

# Update settings - valid gemini api key
PUT {{base_url}}/wp-json/pika/v1/settings
Cookie: {{authCookie}}
Content-Type: application/json

{
  "gemini_api_key": "AIzaSyD-sample-api-key"
}

###

# Update settings - invalid currency
PUT {{base_url}}/wp-json/pika/v1/settings
Cookie: {{authCookie}}
Content-Type: application/json

{
  "currency": "XYZ"
}

###

# Update settings - valid EUR currency
PUT {{base_url}}/wp-json/pika/v1/settings
Cookie: {{authCookie}}
Content-Type: application/json

{
  "currency": "EUR"
}

###

# Update settings - invalid key
PUT {{base_url}}/wp-json/pika/v1/settings
Cookie: {{authCookie}}
Content-Type: application/json

{
  "invalid_key": "value"
}

###

# ========================================
# TAGS API ENDPOINTS
# ========================================

# Get all tags
GET {{base_url}}/wp-json/pika/v1/tags
Cookie: {{authCookie}}

###

# Add a new tag
POST {{base_url}}/wp-json/pika/v1/tags
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Tag 2",
  "color": "#000000",
  "bgColor": "#ffffff",
  "icon": "tag",
  "description": "Test description"
}

###

# Get a tag by id
GET {{base_url}}/wp-json/pika/v1/tags/6
Cookie: {{authCookie}}

###

# Update a tag
PUT {{base_url}}/wp-json/pika/v1/tags/6
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Tag 2 Updated 1",
  "color": "#000000",
  "bgColor": "#ffffff"
}

###

# Delete a tag
DELETE {{base_url}}/wp-json/pika/v1/tags/7
Cookie: {{authCookie}}

###

# ========================================
# CATEGORIES API ENDPOINTS
# ========================================

# Get all categories
GET {{base_url}}/wp-json/pika/v1/categories
Cookie: {{authCookie}}

###

# Add a new category
POST {{base_url}}/wp-json/pika/v1/categories
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test child Category 12",
  "icon": "tag",
  "color": "#000000",
  "bgColor": "#ffffff",
  "type": "expense",
  "description": "Test child category description",
  "parentId": 61
}

###

# Get a category by id
GET {{base_url}}/wp-json/pika/v1/categories/1
Cookie: {{authCookie}}

###

# Update a category
PUT {{base_url}}/wp-json/pika/v1/categories/65
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Category 12 Updated 1",
  "icon": "tag"
}

###

# Delete a category
DELETE {{base_url}}/wp-json/pika/v1/categories/61
Cookie: {{authCookie}}

###

# ========================================
# UPLOAD API ENDPOINTS
# ========================================

# Upload a file - account avatar
POST {{base_url}}/wp-json/pika/v1/upload/avatar
Cookie: {{authCookie}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="entityType"

person
------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="avatar01.png"
Content-Type: image/png

< docs/images/avatar01.png
------WebKitFormBoundary--

###

# Upload a file - transaction attachment - image
POST {{base_url}}/wp-json/pika/v1/upload/attachment
Cookie: {{authCookie}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="entityType"

transaction
------WebKitFormBoundary
Content-Disposition: form-data; name="attachmentType"

image
------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="image01.png"
Content-Type: image/png

< docs/images/avatar01.png
------WebKitFormBoundary--

###

# Upload a file - transaction attachment - pdf
POST {{base_url}}/wp-json/pika/v1/upload/attachment
Cookie: {{authCookie}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="entityType"

transaction
------WebKitFormBoundary
Content-Disposition: form-data; name="attachmentType"

document
------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="document01.pdf"
Content-Type: application/pdf

< /Users/mohammed.ashad/Downloads/EAadhaar_2003702210041020250609180022_1806202514229.pdf
------WebKitFormBoundary--

###

# ========================================
# PEOPLE API ENDPOINTS
# ========================================

# Get all people
GET {{base_url}}/wp-json/pika/v1/people
Cookie: {{authCookie}}

###

# Create a new person
POST {{base_url}}/wp-json/pika/v1/people
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Person 1",
  "email": "testperson1@example.com",
  "phone": "1234567890",
  "avatarId": "17"
}

###

# Get a person
GET {{base_url}}/wp-json/pika/v1/people/1
Cookie: {{authCookie}}

###

# Update a person
PUT {{base_url}}/wp-json/pika/v1/people/1
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Person 1 Updated 1",
  "email": "testperson1@example.com"
}

###

# Delete a person
DELETE {{base_url}}/wp-json/pika/v1/people/7
Cookie: {{authCookie}}

###

# ========================================
# ACCOUNTS API ENDPOINTS
# ========================================

# Get all accounts
GET {{base_url}}/wp-json/pika/v1/accounts
Cookie: {{authCookie}}

###

# Create a new account
POST {{base_url}}/wp-json/pika/v1/accounts
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Account 1",
  "description": "Test account description",
  "avatarId": 10
}

###

# Create a new account
POST {{base_url}}/wp-json/pika/v1/accounts
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Account",
  "description": "Test account description",
  "bgColor": "#000000",
  "color": "#ffffff",
  "icon": "wallet"
}

###

# Get an account
GET {{base_url}}/wp-json/pika/v1/accounts/1
Cookie: {{authCookie}}

###

# Update an account
PUT {{base_url}}/wp-json/pika/v1/accounts/3
Cookie: {{authCookie}}
Content-Type: application/json

{
  "name": "Test Account 3 Updated 1",
  "description": "Test account description updated",
  "icon": "wallet",
  "avatarId": 14
}

###

# Delete an account
DELETE {{base_url}}/wp-json/pika/v1/accounts/2
Cookie: {{authCookie}}

###

# ========================================
# TRANSACTIONS API ENDPOINTS
# ========================================

# Get all transactions
GET {{base_url}}/wp-json/pika/v1/transactions
Cookie: {{authCookie}}

###

# Create a new transaction
POST {{base_url}}/wp-json/pika/v1/transactions
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Test Transaction 1",
  "amount": 101,
  "date": "2025-01-01",
  "type": "income",
  "categoryId": 50,
  "accountId": 1,
  "personId": 3,
  "tags": [2],
  "attachments": [23]
}

###

# Get a transaction
GET {{base_url}}/wp-json/pika/v1/transactions/3
Cookie: {{authCookie}}

###

# Update a transaction
PUT {{base_url}}/wp-json/pika/v1/transactions/3
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Test Transaction 1 Updated 1",
  "amount": 102,
  "date": "2025-01-01",
  "note": "Test transaction note updated",
  "attachments": [13],
  "tags": [1, 3]
}

###

# Delete a transaction
DELETE {{base_url}}/wp-json/pika/v1/transactions/4
Cookie: {{authCookie}}

###

# ========================================
# ANALYTICS API ENDPOINTS
# ========================================

# Get weekly expenses
GET {{base_url}}/wp-json/pika/v1/analytics/weekly-expenses
Cookie: {{authCookie}}

###

# Get daily summaries
GET {{base_url}}/wp-json/pika/v1/analytics/daily-summaries
Cookie: {{authCookie}}
Content-Type: application/json

{
  "month": 7,
  "year": 2025
}

###

# Get monthly summary
GET {{base_url}}/wp-json/pika/v1/analytics/monthly-summary
Cookie: {{authCookie}}
Content-Type: application/json

{
  "month": 7,
  "year": 2025
}

###

# Get monthly category spending
GET {{base_url}}/wp-json/pika/v1/analytics/monthly-category-spending
Cookie: {{authCookie}}
Content-Type: application/json

{
  "month": 7,
  "year": 2025
}
###

# Get monthly tag spending
GET {{base_url}}/wp-json/pika/v1/analytics/monthly-tag-activity
Cookie: {{authCookie}}
Content-Type: application/json

{
  "month": 7,
  "year": 2025
}

###

# Get monthly person spending
GET {{base_url}}/wp-json/pika/v1/analytics/monthly-person-activity
Cookie: {{authCookie}}
Content-Type: application/json

{
  "month": 7,
  "year": 2025
}

###

# Get person transaction summary

GET {{base_url}}/wp-json/pika/v1/analytics/person-transaction-summary?personId=7&timeBucket=monthly
Cookie: {{authCookie}}
Content-Type: application/json


###

# ========================================
# AI API ENDPOINTS
# ========================================

# Test gemini response
GET {{base_url}}/wp-json/pika/v1/ai/test
Cookie: {{authCookie}}

###

# ========================================
# REMINDERS API ENDPOINTS
# ========================================

# Get all reminders
GET {{base_url}}/wp-json/pika/v1/reminders
Cookie: {{authCookie}}

###

# Get all reminders including archived
GET {{base_url}}/wp-json/pika/v1/reminders?archived=true
Cookie: {{authCookie}}

###

# Get due reminders
GET {{base_url}}/wp-json/pika/v1/reminders/due
Cookie: {{authCookie}}

###

# Get due reminders for specific date
GET {{base_url}}/wp-json/pika/v1/reminders/due?date=2024-01-15
Cookie: {{authCookie}}

###

# Get a reminder by id
GET {{base_url}}/wp-json/pika/v1/reminders/2
Cookie: {{authCookie}}

###

# Create a new one-time reminder
POST {{base_url}}/wp-json/pika/v1/reminders
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Pay electricity bill",
  "description": "Monthly electricity bill payment",
  "amount": 150.00,
  "type": "expense",
  "accountId": 1,
  "categoryId": 5,
  "date": "2024-01-15",
  "isRecurring": false
}

###

# Create a new recurring reminder - postpaid (fixed schedule)
POST {{base_url}}/wp-json/pika/v1/reminders
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Monthly rent payment",
  "description": "Rent due every 1st of month",
  "amount": 1500.00,
  "type": "expense",
  "accountId": 1,
  "categoryId": 3,
  "memberId": 2,
  "tagIds": [1, 5],
  "date": "2024-01-01",
  "isRecurring": true,
  "recurrencePeriod": "1 month",
  "recurrenceType": "postpaid"
}

###

# Create a new recurring reminder - prepaid (after completion)
POST {{base_url}}/wp-json/pika/v1/reminders
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Gym membership renewal",
  "description": "Renew gym membership every 3 months after payment",
  "amount": 300.00,
  "type": "expense",
  "accountId": 1,
  "categoryId": 8,
  "date": "2024-01-15",
  "isRecurring": true,
  "recurrencePeriod": "3 months",
  "recurrenceType": "prepaid"
}

###

# Create a transfer reminder
POST {{base_url}}/wp-json/pika/v1/reminders
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Monthly savings transfer",
  "description": "Transfer to savings account",
  "amount": 500.00,
  "type": "transfer",
  "accountId": 1,
  "fromMemberId": 1,
  "toMemberId": 2,
  "date": "2024-01-01",
  "isRecurring": true,
  "recurrencePeriod": "1 month",
  "recurrenceType": "postpaid"
}

###

# Update a reminder
PUT {{base_url}}/wp-json/pika/v1/reminders/2
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Pay electricity bill - Updated",
  "amount": 175.00,
  "description": "Updated monthly electricity bill payment",
  "date": "2024-01-20"
}

###

# Update reminder recurrence settings
PUT {{base_url}}/wp-json/pika/v1/reminders/2
Cookie: {{authCookie}}
Content-Type: application/json

{
  "isRecurring": true,
  "recurrencePeriod": "2 months",
  "recurrenceType": "postpaid",
  "nextDueDate": "2024-03-01"
}

###

# Mark reminder as completed (with default date - today)
POST {{base_url}}/wp-json/pika/v1/reminders/2/complete
Cookie: {{authCookie}}
Content-Type: application/json

{}

###

# Mark reminder as completed with specific date
POST {{base_url}}/wp-json/pika/v1/reminders/2/complete
Cookie: {{authCookie}}
Content-Type: application/json

{
  "completionDate": "2024-01-01"
}

###

# Convert reminder to transaction (with default date - now)
POST {{base_url}}/wp-json/pika/v1/reminders/2/convert
Cookie: {{authCookie}}
Content-Type: application/json

{}

###

# Convert reminder to transaction with specific date
POST {{base_url}}/wp-json/pika/v1/reminders/3/convert
Cookie: {{authCookie}}
Content-Type: application/json

{
  "transactionDate": "2024-01-15 10:30:00"
}

###

# Archive a reminder (soft delete)
POST {{base_url}}/wp-json/pika/v1/reminders/5/archive
Cookie: {{authCookie}}

###

# ========================================
# IMPORT/EXPORT API ENDPOINTS
# ========================================

# Get supported import/export formats
GET {{base_url}}/wp-json/pika/v1/import-export/formats
Cookie: {{authCookie}}

###

# Get import/export operation status
GET {{base_url}}/wp-json/pika/v1/import-export/status
Cookie: {{authCookie}}

###

# Export categories as JSON (including system categories)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=json&include=categories
Cookie: {{authCookie}}

###

# Export categories as JSON (excluding system categories)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=json&include=categories&exclude_system_categories=true
Cookie: {{authCookie}}

###

# Export categories as CSV (including system categories)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=csv&include=categories
Cookie: {{authCookie}}

###

# Export categories as CSV (excluding system categories)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=csv&include=categories&exclude_system_categories=true
Cookie: {{authCookie}}

###

# Download categories as JSON file (triggers file download)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=json&include=categories&download=true
Cookie: {{authCookie}}

###

# Download categories as CSV file (triggers file download)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=csv&include=categories&download=true
Cookie: {{authCookie}}

###

# Download categories CSV file (excluding system categories)
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=csv&include=categories&exclude_system_categories=true&download=true
Cookie: {{authCookie}}

###

# Export all data types as JSON
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=json
Cookie: {{authCookie}}

###

# Export multiple data types as JSON
GET {{base_url}}/wp-json/pika/v1/import-export/export?format=json&include=categories,accounts,tags
Cookie: {{authCookie}}

###

# Import data from JSON (validation only)
POST {{base_url}}/wp-json/pika/v1/import-export/import?validate_only=true&format=json
Cookie: {{authCookie}}
Content-Type: application/json

{
  "data": {
    "categories": [
      {
        "name": "Test Import Category",
        "icon": "tag",
        "color": "#ff0000",
        "bgColor": "#ffffff",
        "description": "Imported category",
        "type": "expense",
        "parentId": null
      }
    ]
  }
}

###

# Import data from JSON (actual import with merge strategy)
POST {{base_url}}/wp-json/pika/v1/import-export/import?merge_strategy=merge&format=json
Cookie: {{authCookie}}
Content-Type: application/json

{
  "data": {
    "categories": [
      {
        "name": "Test Import Category",
        "icon": "tag",
        "color": "#ff0000",
        "bgColor": "#ffffff",
        "description": "Imported category",
        "type": "expense",
        "parentId": null
      }
    ]
  }
}

###

# Import data from file upload
POST {{base_url}}/wp-json/pika/v1/import-export/import?format=json&merge_strategy=merge
Cookie: {{authCookie}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="import_file"; filename="pika_export.json"
Content-Type: application/json

{
  "categories": [
    {
      "name": "File Import Category",
      "icon": "folder",
      "color": "#00ff00",
      "bgColor": "#ffffff",
      "description": "Category imported from file",
      "type": "income",
      "parentId": null
    }
  ]
}
------WebKitFormBoundary--

###

# ========================================
# PUSH NOTIFICATIONS API ENDPOINTS
# ========================================

# Get VAPID public key
GET {{base_url}}/wp-json/pika/v1/push/vapid-key
Cookie: {{authCookie}}

###

# Subscribe user to push notifications
POST {{base_url}}/wp-json/pika/v1/push/subscribe
Cookie: {{authCookie}}
Content-Type: application/json

{
  "subscription": {
    "endpoint": "https://fcm.googleapis.com/fcm/send/example-endpoint",
    "keys": {
      "p256dh": "example-p256dh-key",
      "auth": "example-auth-key"
    }
  },
  "device_id": "device-123"
}

###

# Unsubscribe user from push notifications
POST {{base_url}}/wp-json/pika/v1/push/unsubscribe
Cookie: {{authCookie}}

###

# Enable push notifications for user
POST {{base_url}}/wp-json/pika/v1/push/enable
Cookie: {{authCookie}}

###

# Disable push notifications for user
POST {{base_url}}/wp-json/pika/v1/push/disable
Cookie: {{authCookie}}

###

# Get notification status for user
GET {{base_url}}/wp-json/pika/v1/push/status
Cookie: {{authCookie}}

###

# Send notification to specific users (admin only)
POST {{base_url}}/wp-json/pika/v1/push/send
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Test Notification",
  "body": "This is a test push notification",
  "icon": "https://example.com/icon.png",
  "badge": "https://example.com/badge.png",
  "image": "https://example.com/image.jpg",
  "tag": "test-notification",
  "data": {
    "url": "https://example.com/action",
    "custom_field": "custom_value"
  },
  "actions": [
    {
      "action": "view",
      "title": "View Details"
    },
    {
      "action": "dismiss",
      "title": "Dismiss"
    }
  ],
  "require_interaction": false,
  "silent": false,
  "user_ids": [1, 2, 3]
}

###

# Send notification to all users (admin only)
POST {{base_url}}/wp-json/pika/v1/push/send
Cookie: {{authCookie}}
Content-Type: application/json

{
  "title": "Global Announcement",
  "body": "This notification will be sent to all users",
  "icon": "https://example.com/announcement-icon.png",
  "tag": "global-announcement",
  "data": {
    "type": "announcement",
    "priority": "high"
  }
}

###

# Get user notifications with pagination
GET {{base_url}}/wp-json/pika/v1/push/notifications?page=1&per_page=20
Cookie: {{authCookie}}

###

# Get user notifications (default pagination)
GET {{base_url}}/wp-json/pika/v1/push/notifications
Cookie: {{authCookie}}

###

# Mark notification as read
PUT {{base_url}}/wp-json/pika/v1/push/notifications/1
Cookie: {{authCookie}}
Content-Type: application/json

{
  "read_at": true
}

###

# Mark notification as clicked
PUT {{base_url}}/wp-json/pika/v1/push/notifications/1
Cookie: {{authCookie}}
Content-Type: application/json

{
  "clicked_at": true
}

###

# Mark notification as dismissed
PUT {{base_url}}/wp-json/pika/v1/push/notifications/1
Cookie: {{authCookie}}
Content-Type: application/json

{
  "dismissed_at": true
}

###

# Update multiple notification status fields
PUT {{base_url}}/wp-json/pika/v1/push/notifications/1
Cookie: {{authCookie}}
Content-Type: application/json

{
  "read_at": true,
  "clicked_at": true,
  "dismissed_at": false
}

###

# Delete a notification
DELETE {{base_url}}/wp-json/pika/v1/push/notifications/1
Cookie: {{authCookie}}

###